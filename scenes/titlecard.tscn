[gd_scene load_steps=6 format=3 uid="uid://bdykculbbagr5"]

[ext_resource type="FontFile" uid="uid://bmebe3hg23s7t" path="res://assets/ui/Elegantile.otf" id="1_fw5i2"]

[sub_resource type="GDScript" id="GDScript_162bs"]
script/source = "extends CanvasLayer

@export var chapt_num: Label
@export var chapt_tit: Label
@export var anim_player: AnimationPlayer

signal finished

func _ready() -> void:
	anim_player.play(\"RESET\")
	hide()
	
func reveal(num: String, title: String) -> void:
	show()
	chapt_num.text = \"CHAPTER %s\" % num.to_upper()
	chapt_tit.text = title
	anim_player.play(\"reveal\")
	SoundManager.play_sound(load(\"res://assets/sounds/titlecard.ogg\"))
	
func _on_animation_player_animation_finished(anim_name: StringName) -> void:
	emit_signal(\"finished\")
	queue_free()
"

[sub_resource type="Animation" id="Animation_e5hdx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CenterContainer/VBoxContainer/ChapterTitle:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CenterContainer/VBoxContainer/ChapterNum:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ColorRect:modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_j41ua"]
resource_name = "reveal"
length = 5.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CenterContainer/VBoxContainer/ChapterNum:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 4, 5),
"transitions": PackedFloat32Array(0, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CenterContainer/VBoxContainer/ChapterTitle:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.5, 4, 5),
"transitions": PackedFloat32Array(0, 0, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ColorRect:modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(4.5, 5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_bfyy3"]
_data = {
&"RESET": SubResource("Animation_e5hdx"),
&"reveal": SubResource("Animation_j41ua")
}

[node name="Titlecard" type="CanvasLayer" node_paths=PackedStringArray("chapt_num", "chapt_tit", "anim_player")]
visible = false
script = SubResource("GDScript_162bs")
chapt_num = NodePath("CenterContainer/VBoxContainer/ChapterNum")
chapt_tit = NodePath("CenterContainer/VBoxContainer/ChapterTitle")
anim_player = NodePath("AnimationPlayer")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_bfyy3")
}

[node name="ColorRect" type="ColorRect" parent="."]
offset_right = 1920.0
offset_bottom = 1080.0
color = Color(0, 0, 0, 1)

[node name="CenterContainer" type="CenterContainer" parent="."]
offset_right = 1920.0
offset_bottom = 1080.0

[node name="VBoxContainer" type="VBoxContainer" parent="CenterContainer"]
layout_mode = 2
theme_override_constants/separation = -9

[node name="ChapterNum" type="Label" parent="CenterContainer/VBoxContainer"]
modulate = Color(1, 1, 1, 0)
layout_mode = 2
theme_override_font_sizes/font_size = 50
text = "CHAPTER 1"

[node name="ChapterTitle" type="Label" parent="CenterContainer/VBoxContainer"]
modulate = Color(1, 1, 1, 0)
layout_mode = 2
theme_override_fonts/font = ExtResource("1_fw5i2")
theme_override_font_sizes/font_size = 200
text = "DENIAL IS A RIVER IN EGYPT"

[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
